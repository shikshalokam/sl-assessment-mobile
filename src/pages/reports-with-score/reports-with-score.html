<!--
  Generated template for the ObservationReportsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
  <header [title]="'headings.observationReports'|translate" [hideBack]="false">
  </header>
</ion-header>
<ion-content style="background-color: #fff !important;">
  <div *ngIf="!error">
    <h3 *ngIf="reportObj?.schoolName" class="heading">
      {{reportObj?.schoolName}}
    </h3>
    <div padding style="text-transform: capitalize; border:1px solid #ccc; margin: 10px 10px;"
      *ngIf="reportObj?.observationName || reportObj?.observationName">
      <!-- {{reportObj?.observationName}} {{reportObj?.entityName ? ' > ' : ''}} {{reportObj?.entityName }} -->
      {{reportObj?.observationName}}
    </div>
    <div *ngIf="allQuestions?.length">
      <button ion-button icon-start (click)="openFilter()" margin style="float:right">
        <ion-icon name="options"></ion-icon>
        {{'buttons.filter'|translate}}
      </button>
      <!-- <ion-icon name="options" class="filterIcon" (click)="openFilter()"></ion-icon> -->
    </div>
    <!-- Scores details bar -->
    <ion-grid *ngIf="reportObj?.totalScore && reportObj?.scoreAchieved">
      <ion-row style="text-align: center;">
        <ion-col> {{'labels.totalScore' | translate}} : {{reportObj?.totalScore}}</ion-col>
        <ion-col> {{'labels.scoreAchieved' | translate}} : {{reportObj?.scoreAchieved}}</ion-col>
      </ion-row>
    </ion-grid>
    <ion-grid *ngIf="reportObj?.schoolsObserved && reportObj?.totalSchools">
      <ion-row style="text-align: center;">
        <ion-col> {{'labels.totalSchools' | translate}} : {{reportObj?.totalSchools}}</ion-col>
        <ion-col> {{'labels.schoolsObserved' | translate}} : {{reportObj?.schoolsObserved}}</ion-col>
      </ion-row>
    </ion-grid>
    <ion-grid *ngIf="reportObj?.totalObservations">
      <ion-row>
        <ion-col style="margin-left: 15px;"> {{'labels.totalObservations' | translate}} :
          {{reportObj?.totalObservations}}</ion-col>
      </ion-row>
    </ion-grid>
    <!-- Scores details bar ends here-->
    <div *ngFor="let element of reportObj?.response;let i = index">
      <ion-card>
        <pie-chart [data]="element" [questionNumber]="i+1" *ngIf="element.chart.type == 'pie'"></pie-chart>
        <scatter-chart [data]="element" [questionNumber]="i+1" *ngIf="element.chart.type == 'scatter'"></scatter-chart>
        <bar-chart [data]="element" [questionNumber]="i+1" *ngIf="element.chart.type === 'bar' || element.chart.type === 'column'"></bar-chart>
      </ion-card>
    </div>
  </div>
  <div class="_flex-box _justify-content-center _errorBox" *ngIf="!reportObj?.response">
    {{error}}
  </div>

  <ion-fab bottom right *ngIf="reportObj?.response">
    <button ion-fab mini>
      <ion-icon name="more"></ion-icon>
    </button>
    <ion-fab-list side="left">
      <button ion-fab (click)="downloadSharePdf('download')">
        <ion-icon name="download"></ion-icon>
      </button>
      <button ion-fab (click)="downloadSharePdf('share')">
        <ion-icon name="share"></ion-icon>
      </button>
    </ion-fab-list>
  </ion-fab>
</ion-content>